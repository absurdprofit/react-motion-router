/* LICENSES */
var I=Object.defineProperty;var $=(s,i,t)=>i in s?I(s,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[i]=t;var p=(s,i,t)=>($(s,typeof i!="symbol"?i+"":i,t),t);import{R as d,j as e,_ as L,B as S,a as g,g as h}from"./index-xTRlJpFc.js";import{H as z}from"./Heroes-rLdVZhoo.js";import{C as F,a as N,b as T}from"./CardMedia-ijU9eVaZ.js";import{T as U}from"./Typography-DgvonC8R.js";import"./king-wJZ8uQj7.js";import"./extendSxProp-NLlrLqR1.js";let m="",x="",v="",c="",b="";const _=({observer:s,navigation:i,hero:t})=>{const n=d.useRef(null),o=d.useRef(null),C=d.useRef(null),l=d.useRef(null);d.useEffect(()=>(l.current&&s.observe(l.current),()=>{l.current&&s.unobserve(l.current)}),[l,s]);const B=()=>{const y=l.current,j=C.current,R=o.current,P=n.current;if(y&&j&&R&&P){const a=y.getBoundingClientRect(),f=j.getBoundingClientRect(),u=R.getBoundingClientRect();b=h(-u.top,-u.right,-u.bottom,-u.left),R.style.clipPath=b,m=h(-a.top,-a.right,-a.bottom,-a.left),y.style.clipPath=m,v=h(-a.top,-a.right,-a.bottom,-a.left),P.style.clipPath=v,x=h(-f.top,-f.right,-f.bottom,-f.left),j.style.clipPath=x,c=t.id}};return e.jsx("li",{role:"menuitem",children:e.jsx(L,{href:"/details",params:{...t},onClick:B,children:e.jsxs(S,{"aria-label":`Character profile: ${t.name}`,disableRipple:!0,children:[e.jsx(g,{id:`${t.id}-card-bg`,children:e.jsx("div",{id:`${t.id}-bg`,className:"card-bg",ref:n,style:{width:345>window.screen.width?300:345,clipPath:c===t.id?v:""}})}),e.jsxs(F,{sx:{width:345>window.screen.width?300:345},children:[e.jsx(g,{id:t.id,children:e.jsx(N,{component:"img",height:"140",loading:c===t.id?"eager":"lazy",decoding:c===t.id?"sync":"async",src:t.photoUrl,alt:t.name,id:`${t.id}`,ref:l,style:{clipPath:c===t.id?m:""}})}),e.jsxs(T,{children:[e.jsx(g,{id:`title-${t.id}`,children:e.jsx(U,{style:{clipPath:c===t.id?b:"",fontWeight:"bold",margin:0,fontSize:"28px"},ref:o,gutterBottom:!0,variant:"h4",component:"h4",children:t.name})}),e.jsx(g,{id:`description-${t.id}`,children:e.jsx("p",{ref:C,style:{fontSize:"16px",clipPath:c===t.id?x:""},children:t.description})})]})]})]})})})},k=s=>{const i=z.map((t,n)=>e.jsx(_,{hero:t,...s},n));return e.jsx(e.Fragment,{children:i})},r=class r extends d.Component{constructor(){super(...arguments);p(this,"ref",null);p(this,"observer",new IntersectionObserver(this.observe.bind(this),{root:document.querySelector(".card-list")}))}componentDidMount(){var t;(t=this.props.navigation.transition)==null||t.finished.then(()=>{var n;r.isFirstLoad=!0,((n=this.props.navigation.current.url)==null?void 0:n.pathname)==="/cards"&&(m="",x="",b=""),this.forceUpdate()}),this.ref&&this.ref.scrollTo(r.scrollPos.x,r.scrollPos.y)}shouldComponentUpdate(){return!1}componentWillUnmount(){this.observer.disconnect(),this.ref&&(r.scrollPos={x:this.ref.scrollLeft,y:this.ref.scrollTop})}observe(t){for(let n of t){const o=n.target;n.isIntersecting?(o.loading="eager",o.decoding="sync"):(o.loading="lazy",o.decoding="async")}}render(){return e.jsx("div",{className:`cards ${r.isFirstLoad?"loaded":"suspense"}`,children:e.jsx("ul",{role:"group","aria-label":"One Punch Man Series Characters",className:"card-list",ref:t=>this.ref=t,children:e.jsx(k,{...this.props,observer:this.observer})})})}};p(r,"isFirstLoad",!1),p(r,"scrollPos",{x:0,y:0});let w=r;export{w as default};
