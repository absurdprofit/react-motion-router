/* LICENSES */
import{R as o,j as e,_ as w,B,a as f,g as u}from"./index-Kz-IqHAf.js";import{H as I}from"./Heroes-rLdVZhoo.js";import{C as $,a as _,b as L}from"./CardMedia-kZLcr9JL.js";import{T as S}from"./Typography-HM3hK_r6.js";import"./king-wJZ8uQj7.js";import"./extendSxProp-DmTAmp7H.js";let g="",h="",j="",r="",m="";const z=({observer:c,navigation:a,hero:t})=>{const s=o.useRef(null),R=o.useRef(null),v=o.useRef(null),n=o.useRef(null);o.useEffect(()=>(n.current&&c.observe(n.current),()=>{n.current&&c.unobserve(n.current)}),[n,c]);const C=()=>{const x=n.current,b=v.current,y=R.current,P=s.current;if(x&&b&&y&&P){const i=x.getBoundingClientRect(),d=b.getBoundingClientRect(),p=y.getBoundingClientRect();m=u(-p.top,-p.right,-p.bottom,-p.left),y.style.clipPath=m,g=u(-i.top,-i.right,-i.bottom,-i.left),x.style.clipPath=g,j=u(-i.top,-i.right,-i.bottom,-i.left),P.style.clipPath=j,h=u(-d.top,-d.right,-d.bottom,-d.left),b.style.clipPath=h,r=t.id}};return e.jsx("li",{role:"menuitem",children:e.jsx(w,{href:"details",params:{...t},onClick:C,children:e.jsxs(B,{"aria-label":`Character profile: ${t.name}`,disableRipple:!0,children:[e.jsx(f,{id:`${t.id}-card-bg`,children:e.jsx("div",{id:`${t.id}-card-bg`,className:"card-bg",ref:s,style:{width:345>window.screen.width?300:345,clipPath:r===t.id?j:""}})}),e.jsxs($,{sx:{width:345>window.screen.width?300:345},children:[e.jsx(f,{id:t.id,children:e.jsx(_,{component:"img",height:"140",loading:r===t.id?"eager":"lazy",decoding:r===t.id?"sync":"async",src:t.photoUrl,alt:t.name,id:`${t.id}`,ref:n,style:{clipPath:r===t.id?g:""}})}),e.jsxs(L,{children:[e.jsx(f,{id:`title-${t.id}`,children:e.jsx(S,{style:{clipPath:r===t.id?m:"",fontWeight:"bold",margin:0,fontSize:"28px"},ref:R,gutterBottom:!0,variant:"h4",component:"h4",children:t.name})}),e.jsx(f,{id:`description-${t.id}`,children:e.jsx("p",{ref:v,style:{fontSize:"16px",clipPath:r===t.id?h:""},children:t.description})})]})]})]})})})},F=c=>{const a=I.map((t,s)=>e.jsx(z,{hero:t,...c},s));return e.jsx(e.Fragment,{children:a})};class l extends o.Component{static isFirstLoad=!1;ref=null;observer=new IntersectionObserver(this.observe.bind(this),{root:document.querySelector(".card-list")});static scrollPos={x:0,y:0};componentDidMount(){this.props.navigation.transition?.finished.then(()=>{l.isFirstLoad=!0,this.props.navigation.current.url?.pathname==="/cards"&&(g="",h="",m=""),this.forceUpdate()}),this.ref&&this.ref.scrollTo(l.scrollPos.x,l.scrollPos.y)}shouldComponentUpdate(){return!1}componentWillUnmount(){this.observer.disconnect(),this.ref&&(l.scrollPos={x:this.ref.scrollLeft,y:this.ref.scrollTop})}observe(a){for(let t of a){const s=t.target;t.isIntersecting?(s.loading="eager",s.decoding="sync"):(s.loading="lazy",s.decoding="async")}}render(){return e.jsx("div",{className:`cards ${l.isFirstLoad?"loaded":"suspense"}`,children:e.jsx("ul",{role:"group","aria-label":"One Punch Man Series Characters",className:"card-list",ref:a=>this.ref=a,children:e.jsx(F,{...this.props,observer:this.observer})})})}}export{l as default};
