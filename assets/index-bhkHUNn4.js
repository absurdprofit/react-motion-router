/* LICENSES */
import{R as a,j as e,_ as B,B as z,a as d,g}from"./index-Kz-IqHAf.js";import{H as L}from"./Heroes-rLdVZhoo.js";import{C as F,a as N,b as S}from"./CardMedia-kZLcr9JL.js";import{T as U}from"./Typography-HM3hK_r6.js";import"./king-wJZ8uQj7.js";import"./extendSxProp-DmTAmp7H.js";let l="",f="",n="",u="",b="";const _=({observer:y,navigation:o,hero:t})=>{const i=a.useRef(null),j=a.useRef(null),R=a.useRef(null),v=a.useRef(null),P=a.useRef(null),w={...t,photoAspect:0},$=()=>{const c=v.current,m=R.current,x=j.current,C=i.current,I=P.current;if(c&&m&&x&&I&&C){const s=c.getBoundingClientRect(),p=m.getBoundingClientRect(),h=x.getBoundingClientRect();w.photoAspect=c.naturalWidth/c.naturalHeight,u=g(-h.top,-h.right,-h.bottom,-h.left),x.style.clipPath=u,l=g(-s.top,-s.right,-s.bottom,-s.left),c.style.clipPath=l,I.style.clipPath=l,b=g(-s.top,-s.right,-s.bottom,-s.left),C.style.clipPath=b,f=g(-p.top,-p.right,-p.bottom,-p.left),m.style.clipPath=f,n=t.id}};return e.jsx("li",{role:"menuitem",children:e.jsx(B,{href:"details",params:w,onClick:$,children:e.jsxs(z,{"aria-label":`Character profile: ${t.name}`,disableRipple:!0,children:[e.jsx(d,{id:`${t.id}-card-bg`,config:{willChange:["borderRadius"]},children:e.jsx("div",{id:`${t.id}-card-bg`,className:"card-bg",ref:i,style:{width:345>window.screen.width?300:345,clipPath:n===t.id?b:""}})}),e.jsxs(F,{sx:{width:345>window.screen.width?300:345},children:[e.jsx(d,{id:`${t.id}-gradient-overlay`,children:e.jsx("div",{ref:P,className:"gradient-overlay",style:{clipPath:n===t.id?l:""}})}),e.jsx(d,{id:t.id,children:e.jsx(N,{component:"img",height:345,loading:n===t.id?"eager":"lazy",decoding:n===t.id?"sync":"async",src:t.photoUrl,alt:t.name,id:`${t.id}`,ref:v,style:{clipPath:n===t.id?l:""}})}),e.jsxs(S,{style:{position:"absolute",bottom:"0",color:"white"},children:[e.jsx(d,{id:`title-${t.id}`,config:{type:"fade-through"},children:e.jsx(U,{style:{clipPath:n===t.id?u:"",fontWeight:"bold",zIndex:10,margin:0,position:"relative",fontSize:"28px"},ref:j,gutterBottom:!0,variant:"h4",component:"h4",children:t.name})}),e.jsx(d,{id:`description-${t.id}`,config:{type:"fade-through"},children:e.jsx("p",{ref:R,style:{fontSize:"16px",zIndex:10,position:"relative",clipPath:n===t.id?f:""},children:t.description})})]})]})]})})})},T=y=>{const o=L.map((t,i)=>e.jsx(_,{hero:t,...y},i));return e.jsx(e.Fragment,{children:o})};class r extends a.Component{static isFirstLoad=!1;ref=null;observer=new IntersectionObserver(this.observe.bind(this),{root:document.querySelector(".card-list")});static scrollPos={x:0,y:0};componentDidMount(){this.props.navigation.preloadRoute("details"),this.props.navigation.transition?.finished.then(()=>{r.isFirstLoad||(r.isFirstLoad=!0,this.forceUpdate()),this.props.navigation.current.url?.pathname==="/cards-2"&&(l="",f="",u="",this.forceUpdate())}),this.ref&&this.ref.scrollTo(r.scrollPos.x,r.scrollPos.y)}shouldComponentUpdate(){return!1}componentWillUnmount(){this.observer.disconnect(),this.ref&&(r.scrollPos={x:this.ref.scrollLeft,y:this.ref.scrollTop})}observe(o){for(let t of o){const i=t.target;t.isIntersecting?(i.loading="eager",i.decoding="sync"):(i.loading="lazy",i.decoding="async")}}render(){return e.jsx("div",{className:`cards cards-2 ${r.isFirstLoad?"loaded":"suspense"}`,children:e.jsx("ul",{role:"group","aria-label":"One Punch Man Series Characters",className:"card-list",ref:o=>this.ref=o,children:e.jsx(T,{...this.props,observer:this.observer})})})}}export{r as default};
