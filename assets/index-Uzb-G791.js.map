{"version":3,"file":"index-Uzb-G791.js","sources":["../../src/Screens/Details/index.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { SharedElement } from '@react-motion-router/core';\r\nimport { Anchor, ScreenComponentProps, GestureRegion } from '@react-motion-router/stack';\r\nimport Typography from '@mui/material/Typography';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport ClearIcon from '@mui/icons-material/Clear';\r\nimport { Hero } from '../../assets/Heroes';\r\nimport './index.css';\r\n\r\ntype DetailsParams = Hero & {\r\n    noBg?: boolean;\r\n};\r\n\r\ninterface DetailsProps extends ScreenComponentProps<DetailsParams> { }\r\n\r\nlet isFirstLoad = false;\r\nlet originalDesc: string | undefined;\r\nlet lastHero = '';\r\nexport default function Details(props: DetailsProps) {\r\n    const [gestureDisabled, setGestureDisabled] = React.useState(false);\r\n    const { noBg, ...hero } = props.route.params;\r\n\r\n    useEffect(() => {\r\n        if (!hero.name) {\r\n            props.navigation.goBack();\r\n            return;\r\n        }\r\n        lastHero = hero.name;\r\n        if (hero.description) {\r\n            if (!originalDesc)\r\n                originalDesc = props.navigation.metaData.get('description') as string | undefined;\r\n\r\n            const description = hero.description;\r\n            props.navigation.metaData.set('description', `${description.slice(0, 102)}...`);\r\n        }\r\n\r\n\r\n        props.navigation.addEventListener('back', () => {\r\n            props.navigation.metaData.set('description', originalDesc);\r\n            originalDesc = undefined;\r\n        }, { once: true, capture: true });\r\n\r\n        props.navigation.transition?.finished.then(() => {\r\n            isFirstLoad = true;\r\n        });\r\n    }, []);\r\n\r\n    if (!hero.name) return <></>;\r\n\r\n    const photoAspect = (hero.photoWidth / hero.photoHeight);\r\n\r\n    const onScroll = (e: Event) => {\r\n        if (!(e.target instanceof HTMLElement)) return;\r\n        const scrollPos = e.target.scrollTop;\r\n        const maxScroll = e.target.scrollHeight - e.target.clientHeight;\r\n        const scrollPercent = scrollPos / maxScroll;\r\n        if (scrollPercent !== 0) {\r\n            setGestureDisabled(true);\r\n        } else {\r\n            setGestureDisabled(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <GestureRegion disabled={gestureDisabled}>\r\n            <article\r\n                aria-label={`Character profile: ${hero.name}`}\r\n                className={`details ${isFirstLoad ? 'loaded' : 'suspense'}`}\r\n                style={{\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                    backgroundColor: noBg ? 'white' : undefined\r\n                }}\r\n            >\r\n                <SharedElement id={`${hero.id}-card-bg`} config={{ styles: ['background-color', 'border-radius'], deepClone: false }} disabled={noBg}>\r\n                    <div className=\"card-bg\" aria-hidden=\"true\">\r\n                        \r\n                            <Anchor aria-label='Go Back' goBack tabIndex={-1}>\r\n                                <IconButton style={{\r\n                                    position: \"absolute\",\r\n                                    color: 'grey',\r\n                                    zIndex: 10000\r\n                                }} disableRipple>\r\n                                    <SharedElement id=\"back\" config={{\r\n                                        type: 'fade-through',\r\n                                        styles: ['color']\r\n                                    }}>\r\n                                        <ClearIcon style={{\r\n                                            zIndex: 100\r\n                                        }} />\r\n                                    </SharedElement>\r\n                                </IconButton>\r\n                            </Anchor>\r\n                            <div className=\"profile-info\">\r\n                                <SharedElement id={`${hero.id}-gradient-overlay`} config={{ styles: ['background', 'opacity', 'clip-path', 'border-radius'] }}>\r\n                                    <div\r\n                                        className=\"gradient-overlay\"\r\n                                        style={{\r\n                                            height: window.innerWidth / photoAspect,\r\n                                            width: window.innerWidth\r\n                                        }}\r\n                                        aria-hidden=\"true\"\r\n                                    ></div>\r\n                                </SharedElement>\r\n                                <SharedElement id={hero.id} config={{ styles: ['object-fit', 'border-radius'] }}>\r\n                                    <img src={hero.photoUrl} alt=\"Character\" width={hero.photoWidth} height={hero.photoHeight} />\r\n                                </SharedElement>\r\n                                <div className=\"text-content\" tabIndex={0}>\r\n                                    <SharedElement id={`title-${hero.id}`}>\r\n                                        <Typography\r\n                                            id=\"title\"\r\n                                            style={{ fontWeight: 'bold', fontSize: '28px', zIndex: 10 }}\r\n                                            gutterBottom\r\n                                            variant=\"h4\"\r\n                                            component=\"h4\"\r\n                                        >\r\n                                            {hero.name}\r\n                                        </Typography>\r\n                                    </SharedElement>\r\n                                    <div className=\"description\">\r\n                                        <SharedElement id={`description-${hero.id}`} config={{ styles: ['clip-path', 'text-align', 'overflow', 'line-height'] }}>\r\n                                            <p style={{ zIndex: 10 }}>{hero.description}</p>\r\n                                        </SharedElement>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                    </div>\r\n                </SharedElement>\r\n            </article>\r\n        </GestureRegion>\r\n    );\r\n}"],"names":["isFirstLoad","originalDesc","lastHero","Details","props","gestureDisabled","setGestureDisabled","React","noBg","hero","useEffect","description","jsx","Fragment","photoAspect","GestureRegion","SharedElement","Anchor","IconButton","ClearIcon","jsxs","Typography"],"mappings":"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"}