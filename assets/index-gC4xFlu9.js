/* LICENSES */
import{R as o,j as e,_ as v,B as w,a as f,g as u}from"./index-eeav2MZc.js";import{H as B}from"./Heroes-rLdVZhoo.js";import{C as I,a as $,b as _}from"./CardMedia-YTNr69HT.js";import{T as L}from"./Typography-JmQ-D9YE.js";import"./king-wJZ8uQj7.js";import"./extendSxProp-DQxjhHTz.js";let h="",g="",j="",l="",m="";const S=({observer:c,hero:t})=>{const n=o.useRef(null),s=o.useRef(null),R=o.useRef(null),r=o.useRef(null);o.useEffect(()=>(r.current&&c.observe(r.current),()=>{r.current&&c.unobserve(r.current)}),[r,c]);const P=()=>{const x=r.current,b=R.current,y=s.current,C=n.current;if(x&&b&&y&&C){const i=x.getBoundingClientRect(),d=b.getBoundingClientRect(),p=y.getBoundingClientRect();m=u(-p.top,-p.right,-p.bottom,-p.left),y.style.clipPath=m,h=u(-i.top,-i.right,-i.bottom,-i.left),x.style.clipPath=h,j=u(-i.top,-i.right,-i.bottom,-i.left),C.style.clipPath=j,g=u(-d.top,-d.right,-d.bottom,-d.left),b.style.clipPath=g,l=t.id}};return e.jsx("li",{role:"menuitem",children:e.jsx(v,{href:"details",query:{...t},onClick:P,children:e.jsx(w,{"aria-label":`Character profile: ${t.name}`,disableRipple:!0,children:e.jsx(f,{id:`${t.id}-card-bg`,config:{deepClone:!1},children:e.jsx("div",{id:`${t.id}-card-bg`,className:"card-bg",ref:n,style:{width:345>window.screen.width?300:345,clipPath:l===t.id?j:""},children:e.jsxs(I,{sx:{width:345>window.screen.width?300:345},children:[e.jsx(f,{id:t.id,children:e.jsx($,{component:"img",height:"140",loading:l===t.id?"eager":"lazy",decoding:l===t.id?"sync":"async",src:t.photoUrl,alt:t.name,id:`${t.id}`,ref:r,style:{clipPath:l===t.id?h:""}})}),e.jsxs(_,{children:[e.jsx(f,{id:`title-${t.id}`,children:e.jsx(L,{style:{clipPath:l===t.id?m:"",fontWeight:"bold",margin:0,fontSize:"28px"},ref:s,gutterBottom:!0,variant:"h4",component:"h4",children:t.name})}),e.jsx(f,{id:`description-${t.id}`,children:e.jsx("p",{ref:R,style:{fontSize:"16px",clipPath:l===t.id?g:""},children:t.description})})]})]})})})})})})},z=c=>{const t=B.map((n,s)=>e.jsx(S,{hero:n,...c},s));return e.jsx(e.Fragment,{children:t})};class a extends o.Component{static isFirstLoad=!1;ref=null;observer=new IntersectionObserver(this.observe.bind(this),{root:document.querySelector(".card-list")});static scrollPos={x:0,y:0};componentDidMount(){this.props.navigation.transition?.finished.then(()=>{a.isFirstLoad=!0,this.props.navigation.current.url?.pathname==="/cards"&&(h="",g="",m=""),this.forceUpdate()}),this.ref&&this.ref.scrollTo(a.scrollPos.x,a.scrollPos.y)}shouldComponentUpdate(){return!1}componentWillUnmount(){this.observer.disconnect(),this.ref&&(a.scrollPos={x:this.ref.scrollLeft,y:this.ref.scrollTop})}observe(t){for(let n of t){const s=n.target;n.isIntersecting?(s.loading="eager",s.decoding="sync"):(s.loading="lazy",s.decoding="async")}}render(){return e.jsx("div",{className:`cards ${a.isFirstLoad?"loaded":"suspense"}`,children:e.jsx("ul",{role:"group","aria-label":"One Punch Man Series Characters",className:"card-list",ref:t=>this.ref=t,children:e.jsx(z,{...this.props,observer:this.observer})})})}}export{a as default};
//# sourceMappingURL=index-gC4xFlu9.js.map
